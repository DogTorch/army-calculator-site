:root{--color-primary: #2563eb;--color-primary-dark: #1d4ed8;--color-secondary: #7c3aed;--color-accent: #f59e0b;--color-success: #10b981;--color-warning: #f59e0b;--color-error: #ef4444;--color-background: #ffffff;--color-surface: #f8fafc;--color-border: #e2e8f0;--color-text: #1e293b;--color-text-secondary: #64748b;--color-text-muted: #94a3b8;--color-dark-background: #0f172a;--color-dark-surface: #1e293b;--color-dark-border: #334155;--color-dark-text: #f1f5f9;--color-dark-text-secondary: #cbd5e1;--color-guardsmen: #059669;--color-monsters: #dc2626;--color-mercenaries: #7c2d12;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: 1rem;--spacing-lg: 1.5rem;--spacing-xl: 2rem;--spacing-2xl: 3rem;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;--font-size-xs: .75rem;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem;--font-size-xl: 1.25rem;--font-size-2xl: 1.5rem;--font-size-3xl: 1.875rem;--radius-sm: .25rem;--radius-md: .375rem;--radius-lg: .5rem;--radius-xl: .75rem;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--transition-fast: .15s ease-in-out;--transition-normal: .25s ease-in-out;--transition-slow: .35s ease-in-out;--mobile-small: 320px;--mobile-large: 480px;--tablet-small: 768px;--tablet-large: 1024px;--desktop: 1200px;--touch-target-min: 44px;--touch-target-comfortable: 48px;--touch-target-large: 56px;--mobile-spacing-xs: .5rem;--mobile-spacing-sm: .75rem;--mobile-spacing-md: 1.25rem;--mobile-spacing-lg: 2rem;--mobile-spacing-xl: 2.5rem;--mobile-font-size-xs: .8rem;--mobile-font-size-sm: .9rem;--mobile-font-size-base: 1rem;--mobile-font-size-lg: 1.2rem;--mobile-font-size-xl: 1.4rem}*{box-sizing:border-box;margin:0;padding:0}html{font-family:var(--font-family);line-height:1.5;-webkit-text-size-adjust:100%}body{background-color:var(--color-background);color:var(--color-text);font-size:var(--font-size-base);line-height:1.6;min-height:100vh}@media (prefers-color-scheme: dark){:root{--color-background: var(--color-dark-background);--color-surface: var(--color-dark-surface);--color-border: var(--color-dark-border);--color-text: var(--color-dark-text);--color-text-secondary: var(--color-dark-text-secondary)}}#app{min-height:100vh;display:flex;flex-direction:column}.container{max-width:1200px;margin:0 auto;padding:0 var(--spacing-md)}.grid{display:grid;gap:var(--spacing-lg)}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}h1,h2,h3,h4,h5,h6{font-weight:600;line-height:1.25;margin-bottom:var(--spacing-md)}h1{font-size:var(--font-size-3xl)}h2{font-size:var(--font-size-2xl)}h3{font-size:var(--font-size-xl)}h4{font-size:var(--font-size-lg)}p{margin-bottom:var(--spacing-md)}.text-sm{font-size:var(--font-size-sm)}.text-lg{font-size:var(--font-size-lg)}.text-xl{font-size:var(--font-size-xl)}.text-muted{color:var(--color-text-muted)}.text-secondary{color:var(--color-text-secondary)}.btn{display:inline-flex;align-items:center;justify-content:center;padding:var(--spacing-sm) var(--spacing-md);border:1px solid transparent;border-radius:var(--radius-md);font-size:var(--font-size-sm);font-weight:500;text-decoration:none;cursor:pointer;transition:all var(--transition-fast);-webkit-user-select:none;user-select:none}.btn-primary{background-color:var(--color-primary);color:#fff}.btn-primary:hover:not(:disabled){background-color:var(--color-primary-dark)}.btn-secondary{background-color:var(--color-surface);color:var(--color-text);border-color:var(--color-border)}.btn-secondary:hover:not(:disabled){background-color:var(--color-border)}.btn-sm{padding:var(--spacing-xs) var(--spacing-sm);font-size:var(--font-size-xs)}.btn-lg{padding:var(--spacing-md) var(--spacing-lg);font-size:var(--font-size-lg)}.form-group{margin-bottom:var(--spacing-md)}.form-label{display:block;font-size:var(--font-size-sm);font-weight:500;margin-bottom:var(--spacing-xs);color:var(--color-text)}.form-input{width:100%;padding:var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:var(--font-size-base);background-color:var(--color-background);color:var(--color-text);transition:border-color var(--transition-fast)}.form-input:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #2563eb1a}.form-input.error{border-color:var(--color-error)}.form-error{color:var(--color-error);font-size:var(--font-size-sm);margin-top:var(--spacing-xs)}.card{background-color:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--spacing-lg);box-shadow:var(--shadow-sm)}.card-header{margin-bottom:var(--spacing-md);padding-bottom:var(--spacing-md);border-bottom:1px solid var(--color-border)}.card-title{font-size:var(--font-size-lg);font-weight:600;margin-bottom:var(--spacing-xs)}.unit-guardsmen{border-left:4px solid var(--color-guardsmen)}.unit-monsters{border-left:4px solid var(--color-monsters)}.unit-mercenaries{border-left:4px solid var(--color-mercenaries)}.badge-guardsmen{background-color:var(--color-guardsmen);color:#fff}.badge-monsters{background-color:var(--color-monsters);color:#fff}.badge-mercenaries{background-color:var(--color-mercenaries);color:#fff}.badge{display:inline-flex;align-items:center;padding:var(--spacing-xs) var(--spacing-sm);font-size:var(--font-size-xs);font-weight:500;border-radius:var(--radius-sm)}.flex{display:flex}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:var(--spacing-sm)}.gap-4{gap:var(--spacing-md)}.mt-2{margin-top:var(--spacing-sm)}.mt-4{margin-top:var(--spacing-md)}.mb-2{margin-bottom:var(--spacing-sm)}.mb-4{margin-bottom:var(--spacing-md)}.p-2{padding:var(--spacing-sm)}.p-4{padding:var(--spacing-md)}.px-2{padding-left:var(--spacing-sm);padding-right:var(--spacing-sm)}.py-2{padding-top:var(--spacing-sm);padding-bottom:var(--spacing-sm)}.rounded{border-radius:var(--radius-md)}.rounded-lg{border-radius:var(--radius-lg)}.shadow{box-shadow:var(--shadow-md)}.shadow-lg{box-shadow:var(--shadow-lg)}.touch-target{min-height:var(--touch-target-min);min-width:var(--touch-target-min)}.touch-target-comfortable{min-height:var(--touch-target-comfortable);min-width:var(--touch-target-comfortable)}.touch-target-large{min-height:var(--touch-target-large);min-width:var(--touch-target-large)}.scroll-smooth{scroll-behavior:smooth}.scroll-momentum{-webkit-overflow-scrolling:touch}.scroll-y{overflow-y:auto}.scroll-x{overflow-x:auto}.mobile-hidden{display:none}.mobile-full-width{width:100%}.mobile-center{text-align:center}.desktop-only{display:block}.tablet-only,.mobile-only{display:none}@media (max-width: 767px){.container{padding:0 var(--mobile-spacing-sm)}.grid-cols-2,.grid-cols-3{grid-template-columns:1fr}.btn{width:100%;justify-content:center;min-height:var(--touch-target-min);font-size:var(--mobile-font-size-base)}h1{font-size:var(--mobile-font-size-xl)}h2{font-size:var(--mobile-font-size-lg)}h3{font-size:var(--mobile-font-size-base)}.desktop-only,.tablet-only{display:none!important}.mobile-only{display:block!important}.unit-card{min-height:var(--touch-target-comfortable);padding:var(--mobile-spacing-md)}.combat-log{-webkit-overflow-scrolling:touch;scroll-behavior:smooth}}@media (min-width: 768px) and (max-width: 1023px){.container{padding:0 var(--spacing-md)}.desktop-only{display:none!important}.tablet-only{display:block!important}.mobile-only{display:none!important}.btn,.unit-card{min-height:var(--touch-target-min)}}@media (min-width: 1024px){.desktop-only{display:block!important}.tablet-only,.mobile-only{display:none!important}}.mobile-tab-navigation{position:sticky;top:0;z-index:100;background:var(--color-surface);border-bottom:2px solid var(--color-border);padding:var(--mobile-spacing-sm) 0}.tab-nav-container{display:flex;justify-content:space-around;align-items:center;max-width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.tab-nav-item{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs);padding:var(--mobile-spacing-sm);background:none;border:none;cursor:pointer;transition:all var(--transition-fast);min-width:var(--touch-target-comfortable);min-height:var(--touch-target-comfortable);border-radius:var(--radius-md);flex:1;max-width:120px}.tab-nav-item:hover{background:var(--color-border)}.tab-nav-item.active{background:var(--color-primary);color:#fff}.tab-nav-item.active .tab-icon{transform:scale(1.1)}.tab-nav-item.disabled{opacity:.5;cursor:not-allowed}.tab-nav-item.disabled:hover{background:none}.tab-icon{font-size:var(--mobile-font-size-lg);transition:transform var(--transition-fast)}.tab-label{font-size:var(--mobile-font-size-xs);font-weight:500;text-align:center;line-height:1.2}.collapsible-header{background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-lg) var(--radius-lg) 0 0;padding:var(--spacing-md);cursor:pointer;transition:background-color var(--transition-fast);margin-bottom:0}.collapsible-header:hover{background:var(--color-border)}.collapsible-title{display:flex;align-items:center;gap:var(--spacing-md);font-weight:600}.section-icon{font-size:var(--font-size-lg)}.collapsible-title h2{margin:0;flex:1;font-size:var(--font-size-lg)}.collapse-indicator{font-size:var(--font-size-sm);color:var(--color-text-secondary);transition:transform var(--transition-fast)}.collapsed .collapse-indicator{transform:rotate(-90deg)}.card.collapsed{overflow:hidden}.card.collapsed>*:not(.collapsible-header){display:none}.card.collapsed{border-radius:var(--radius-lg)}.pull-refresh-indicator{position:absolute;top:-60px;left:0;right:0;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--color-surface);border-bottom:1px solid var(--color-border);opacity:0;transform:translateY(-100%);transition:all .3s ease;z-index:1000}.refresh-spinner{width:20px;height:20px;border:2px solid var(--color-border);border-top:2px solid var(--color-primary);border-radius:50%;margin-bottom:.5rem}.refresh-spinner.spinning{animation:spin 1s linear infinite}.refresh-text{font-size:var(--mobile-font-size-sm);color:var(--color-text-secondary);font-weight:500}.fab-container{position:fixed;z-index:1000;pointer-events:none}.floating-action-button{position:fixed;width:56px;height:56px;border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #00000026;transition:all .3s ease;transform:scale(0);pointer-events:auto;z-index:1001}.floating-action-button.fab-visible{transform:scale(1)}.floating-action-button.fab-bottom-right{bottom:24px;right:24px}.floating-action-button.fab-bottom-left{bottom:24px;left:24px}.floating-action-button.fab-bottom-center{bottom:24px;left:50%;transform:translate(-50%) scale(0)}.floating-action-button.fab-bottom-center.fab-visible{transform:translate(-50%) scale(1)}.floating-action-button.fab-primary{background:var(--color-primary);color:#fff}.floating-action-button.fab-secondary{background:var(--color-secondary);color:#fff}.floating-action-button:hover{transform:scale(1.1);box-shadow:0 6px 16px #0003}.floating-action-button.fab-bottom-center:hover{transform:translate(-50%) scale(1.1)}.fab-icon{font-size:1.5rem}.fab-label{display:none}.bottom-sheet-container{position:fixed;top:0;left:0;right:0;bottom:0;z-index:2000;pointer-events:none}.bottom-sheet-backdrop{position:absolute;top:0;left:0;right:0;bottom:0;background:#00000080;opacity:0;transition:opacity .3s ease;pointer-events:auto}.bottom-sheet-backdrop.visible{opacity:1}.bottom-sheet{position:absolute;bottom:0;left:0;right:0;background:var(--color-surface);border-radius:16px 16px 0 0;max-height:80vh;transform:translateY(100%);transition:transform .3s ease;pointer-events:auto;display:flex;flex-direction:column}.bottom-sheet.visible{transform:translateY(0)}.bottom-sheet-header{padding:1rem;border-bottom:1px solid var(--color-border);display:flex;align-items:center;gap:1rem;flex-shrink:0}.bottom-sheet-handle{width:40px;height:4px;background:var(--color-border);border-radius:2px;margin:0 auto;position:absolute;top:8px;left:50%;transform:translate(-50%)}.bottom-sheet-title{margin:0;font-size:var(--font-size-lg);font-weight:600;flex:1;text-align:center}.bottom-sheet-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-secondary);width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%}.bottom-sheet-close:hover{background:var(--color-border)}.bottom-sheet-content{padding:1rem;overflow-y:auto;flex:1}.bottom-sheet-actions{padding:1rem;border-top:1px solid var(--color-border);display:flex;gap:.75rem;flex-shrink:0}.bottom-sheet-actions .btn{flex:1}.mobile-dropdown-content{display:flex;flex-direction:column;gap:.5rem}.mobile-dropdown-item{background:none;border:1px solid var(--color-border);border-radius:var(--radius-md);padding:1rem;text-align:left;cursor:pointer;transition:all .2s ease;font-size:var(--font-size-base)}.mobile-dropdown-item:hover{background:var(--color-border)}.mobile-dropdown-item:active{background:var(--color-primary);color:#fff}.mobile-loading-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:3000;opacity:0;transition:opacity .3s ease}.mobile-loading-overlay.visible{opacity:1}.mobile-loading-content{background:var(--color-surface);border-radius:var(--radius-lg);padding:2rem;display:flex;flex-direction:column;align-items:center;gap:1rem;min-width:200px}.mobile-loading-spinner{width:40px;height:40px;border:3px solid var(--color-border);border-top:3px solid var(--color-primary);border-radius:50%;animation:spin 1s linear infinite}.mobile-loading-text{margin:0;font-size:var(--font-size-base);color:var(--color-text-secondary);text-align:center}.sr-only{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.skip-links{position:fixed;top:-100px;left:0;right:0;z-index:9999;display:flex;justify-content:center;gap:1rem;padding:1rem;background:var(--color-surface);border-bottom:2px solid var(--color-primary);transition:top .3s ease}.skip-links:focus-within{top:0}.skip-link{background:var(--color-primary);color:#fff;padding:.5rem 1rem;border-radius:var(--radius-md);text-decoration:none;font-weight:500;font-size:var(--font-size-sm)}.skip-link:focus{outline:2px solid var(--color-secondary);outline-offset:2px}@media (max-width: 767px){button:focus,.tab-nav-item:focus,.unit-card:focus,input:focus,select:focus,textarea:focus{outline:3px solid var(--color-primary);outline-offset:2px;box-shadow:0 0 0 6px #3b82f61a}@media (prefers-contrast: high){.tab-nav-item,.unit-card,.btn{border:2px solid currentColor}.tab-nav-item.active{background:var(--color-text);color:var(--color-surface)}}@media (prefers-reduced-motion: reduce){.tab-nav-item,.unit-card,.btn,.floating-action-button,.bottom-sheet,.bottom-sheet-backdrop{transition:none!important;animation:none!important}}@media (min-resolution: 2dppx){.tab-label,.unit-name,.btn{font-weight:600}}}.mercenary-item{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);margin-bottom:var(--spacing-sm);background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);transition:border-color var(--transition-fast)}.mercenary-item:hover{border-color:var(--color-primary)}.mercenary-label{display:flex;flex-direction:column;gap:var(--spacing-xs);flex:1}.mercenary-label .unit-name{font-weight:600;color:var(--color-text);font-size:var(--font-size-base)}.mercenary-label .unit-stats{font-size:var(--font-size-sm);color:var(--color-text-muted)}.mercenary-input{display:flex;align-items:center;gap:var(--spacing-sm)}.mercenary-input label{font-size:var(--font-size-sm);color:var(--color-text-secondary);white-space:nowrap;font-weight:500}.mercenary-input input{width:80px;text-align:center;padding:var(--spacing-xs) var(--spacing-sm);border:1px solid var(--color-border);border-radius:var(--radius-sm);font-size:var(--font-size-sm);background-color:var(--color-background);color:var(--color-text);transition:border-color var(--transition-fast)}.mercenary-input input:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #2563eb1a}@media (max-width: 768px){.mercenary-item{flex-direction:column;align-items:stretch;gap:var(--spacing-sm)}.mercenary-input{justify-content:space-between}}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal.hidden{display:none!important}.modal-content{background:var(--color-surface);padding:var(--spacing-xl);border-radius:var(--radius-lg);text-align:center;box-shadow:0 10px 25px #0000004d}.loading-spinner{width:40px;height:40px;border:4px solid var(--color-border);border-top:4px solid var(--color-primary);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto var(--spacing-md) auto}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.army-composition{margin-bottom:var(--spacing-xl);background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-lg);overflow:hidden}.composition-header{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--spacing-md) var(--spacing-lg);display:flex;justify-content:space-between;align-items:center}.composition-title{font-size:var(--font-size-lg);font-weight:700}.composition-score{font-size:var(--font-size-sm);opacity:.9}.composition-content{padding:var(--spacing-lg);font-family:Courier New,monospace;line-height:1.6;background:var(--color-background)}.army-title{font-size:var(--font-size-xl);font-weight:700;color:var(--color-primary);margin:0 0 var(--spacing-sm) 0;text-align:center}.title-divider{border:none;height:2px;background:linear-gradient(90deg,transparent,var(--color-primary),transparent);margin:var(--spacing-sm) 0 var(--spacing-md) 0}.section-header{font-size:var(--font-size-base);font-weight:600;color:var(--color-text);margin:var(--spacing-md) 0 var(--spacing-xs) 0}.section-divider{border:none;height:1px;background:var(--color-border);margin:var(--spacing-xs) 0 var(--spacing-sm) 0}.unit-line{color:var(--color-text);margin:var(--spacing-xs) 0;font-weight:500}.unit-detail{color:var(--color-text-muted);margin:0 0 var(--spacing-xs) var(--spacing-md);font-size:var(--font-size-sm)}.composition-actions{padding:var(--spacing-md);border-top:1px solid var(--color-border);background:var(--color-background);display:flex;justify-content:center}.simulate-btn{background:var(--color-secondary);color:#fff;border:none;padding:var(--spacing-sm) var(--spacing-lg);border-radius:var(--radius-md);font-size:var(--font-size-sm);font-weight:500;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:var(--spacing-xs)}.simulate-btn:hover{background:var(--color-secondary-dark);transform:translateY(-1px)}.simulate-btn:active{transform:translateY(0)}.mode-switcher{margin-top:var(--spacing-lg);margin-bottom:var(--spacing-lg)}.mode-tabs{display:flex;gap:var(--spacing-sm);justify-content:center;flex-wrap:wrap}.mode-tab{display:flex;flex-direction:column;align-items:center;padding:var(--spacing-md) var(--spacing-lg);background:var(--color-surface);border:2px solid var(--color-border);border-radius:12px;cursor:pointer;transition:all .2s ease;min-width:180px;text-align:center}.mode-tab:hover{border-color:var(--color-primary);background:var(--color-background);transform:translateY(-2px);box-shadow:0 4px 12px #2563eb26}.mode-tab.active{border-color:var(--color-primary);background:var(--color-primary);color:#fff;box-shadow:0 4px 12px #2563eb4d}.mode-icon{font-size:var(--font-size-2xl);margin-bottom:var(--spacing-xs)}.mode-label{font-weight:600;font-size:var(--font-size-lg);margin-bottom:var(--spacing-xs)}.mode-desc{font-size:var(--font-size-sm);opacity:.8}.mode-description{margin-bottom:var(--spacing-lg);text-align:center}.mode-desc-text{font-size:var(--font-size-lg);color:var(--color-text-secondary);margin:0}.damage-optimization-controls{margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid var(--color-border)}.damage-optimization-controls .input-group{margin-bottom:var(--spacing-md)}.input-help{display:block;margin-top:var(--spacing-xs);font-size:var(--font-size-xs);color:var(--color-text-muted);font-style:italic}.damage-army-list{display:flex;flex-direction:column;gap:var(--spacing-lg)}.damage-army-card{background:var(--color-background);border:2px solid var(--color-border);border-radius:12px;overflow:hidden;transition:all .2s ease;cursor:pointer}.damage-army-card:hover{border-color:var(--color-primary);box-shadow:0 6px 20px #2563eb26;transform:translateY(-3px)}.damage-army-card.selected{border-color:var(--color-primary);box-shadow:0 8px 25px #2563eb33;background:#f8faff}.damage-army-header{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-lg);background:#fff;border-bottom:1px solid var(--color-border)}.army-rank{font-size:var(--font-size-xl);font-weight:700;color:#1e40af;min-width:40px}.army-strategy{display:flex;align-items:center;gap:var(--spacing-sm);flex:1;justify-content:center}.strategy-icon{font-size:var(--font-size-xl)}.strategy-label{font-weight:600;font-size:var(--font-size-lg);color:#1f2937}.army-damage{display:flex;flex-direction:column;align-items:flex-end;text-align:right}.damage-value{font-size:var(--font-size-xl);font-weight:700;color:#059669}.damage-label{font-size:var(--font-size-sm);color:#6b7280}.click-indicator{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs);opacity:.7;transition:opacity .2s ease}.damage-army-card:hover .click-indicator{opacity:1}.click-text{font-size:var(--font-size-xs);color:#6b7280;font-weight:500}.click-icon{font-size:var(--font-size-sm)}.damage-army-content{padding:var(--spacing-lg)}.army-composition-summary h4{margin:0 0 var(--spacing-md) 0;font-size:var(--font-size-lg);color:#1f2937}.unit-list{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);margin-bottom:var(--spacing-lg)}.unit-item{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-sm);background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;font-size:var(--font-size-sm)}.unit-count{font-weight:600;color:#1e40af}.unit-name{color:#374151}.army-stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-md)}.stat-item{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm);background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px}.stat-label{font-size:var(--font-size-sm);color:#6b7280}.stat-value{font-weight:600;color:#1f2937}.selected-army-details{margin-top:var(--spacing-2xl);padding:var(--spacing-xl);background:#fff;border:2px solid var(--color-primary);border-radius:12px;box-shadow:0 8px 25px #2563eb1a}.selected-army-details h3{margin:0 0 var(--spacing-lg) 0;color:var(--color-primary);font-size:var(--font-size-xl)}.selected-army-header{margin-bottom:var(--spacing-lg);padding-bottom:var(--spacing-lg);border-bottom:1px solid var(--color-border)}.selected-army-header h4{margin:0 0 var(--spacing-md) 0;color:#1f2937;font-size:var(--font-size-lg)}.army-summary-stats{display:flex;flex-wrap:wrap;gap:var(--spacing-lg)}.summary-stat{font-size:var(--font-size-sm);color:#374151}.composition-explanation{margin-bottom:var(--spacing-lg);padding:var(--spacing-lg);background:#f9fafb;border-radius:8px;font-family:Courier New,monospace;font-size:var(--font-size-sm);line-height:1.6}.summary-line{color:#1f2937;font-weight:600;margin:var(--spacing-sm) 0}.unit-line{color:#374151;margin:var(--spacing-xs) 0;padding-left:var(--spacing-md)}.validation-line{margin:var(--spacing-xs) 0;padding-left:var(--spacing-md)}.validation-line.success{color:#059669}.explanation-line{color:#6b7280;margin:var(--spacing-xs) 0}.spacing{height:var(--spacing-sm)}.battle-performance-summary h5{margin:0 0 var(--spacing-md) 0;color:#1f2937;font-size:var(--font-size-lg)}.performance-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--spacing-md)}.performance-item{display:flex;flex-direction:column;gap:var(--spacing-xs);padding:var(--spacing-md);background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px}.performance-label{font-size:var(--font-size-sm);color:#6b7280;font-weight:500}.performance-value{font-size:var(--font-size-base);color:#1f2937;font-weight:600}.combat-logs-section{margin-top:var(--spacing-xl);padding-top:var(--spacing-lg);border-top:1px solid var(--color-border)}.combat-logs-section h5{margin:0 0 var(--spacing-lg) 0;color:#1f2937;font-size:var(--font-size-lg)}.combat-scenarios{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg)}.combat-scenario{background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;padding:var(--spacing-md)}.combat-scenario h6{margin:0 0 var(--spacing-md) 0;color:#1f2937;font-size:var(--font-size-base);font-weight:600}.combat-action{padding:var(--spacing-sm);border-bottom:1px solid #f3f4f6;transition:background-color .2s ease;min-height:var(--touch-target-min);display:flex;flex-direction:column;justify-content:center}.combat-action:last-child{border-bottom:none}.combat-action:hover{background:#f8fafc}.combat-action:active{background:#e2e8f0;transform:scale(.98)}.combat-action.player-action{background:#eff6ff;border-left:3px solid #3b82f6}.combat-action.enemy-action{background:#fef2f2;border-left:3px solid #ef4444}.action-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-xs)}.turn-number{font-size:var(--font-size-xs);color:#6b7280;font-weight:500}.action-type{font-size:var(--font-size-xs);font-weight:600}.action-details{font-size:var(--font-size-sm);color:#374151;line-height:1.4}.damage-dealt{color:#059669;font-weight:600;margin-left:var(--spacing-xs)}.eliminated-indicator{color:#dc2626;font-weight:600;margin-left:var(--spacing-xs)}.no-combat-log{padding:var(--spacing-lg);text-align:center;color:#6b7280;font-style:italic}.progress-modal-content{max-width:600px;text-align:center}.progress-modal-content h3{margin:0 0 var(--spacing-lg) 0;color:var(--color-primary);font-size:var(--font-size-xl)}.progress-container{margin:var(--spacing-lg) 0}.progress-bar{width:100%;height:20px;background:#e5e7eb;border-radius:10px;overflow:hidden;margin-bottom:var(--spacing-md);position:relative}.progress-fill{height:100%;background:linear-gradient(90deg,var(--color-primary),var(--color-success));border-radius:10px;transition:width .3s ease;width:0%}.progress-text{font-size:var(--font-size-base);color:#374151;margin-bottom:var(--spacing-xs);font-weight:500}.progress-percentage{font-size:var(--font-size-lg);color:var(--color-primary);font-weight:700}.progress-details{margin:var(--spacing-md) 0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--spacing-sm)}.progress-stats{display:flex;flex-direction:column;align-items:flex-start;gap:var(--spacing-xs)}.progress-stats span{font-size:var(--font-size-sm);color:#6b7280}.progress-timing{display:flex;align-items:center;gap:var(--spacing-xs);font-family:Courier New,monospace;font-size:var(--font-size-sm)}.progress-timing #progress-elapsed{color:var(--color-primary);font-weight:600}.timer-separator{color:#9ca3af}.progress-timing #progress-timeout{color:#ef4444;font-weight:600}.progress-timing #progress-remaining{color:#059669;font-size:var(--font-size-xs);margin-left:var(--spacing-xs)}.progress-actions{margin:var(--spacing-lg) 0}.progress-actions .btn{padding:var(--spacing-sm) var(--spacing-lg);font-size:var(--font-size-sm);border-radius:var(--radius-md);border:none;cursor:pointer;display:inline-flex;align-items:center;gap:var(--spacing-xs);transition:all .2s ease}.progress-actions .btn-secondary{background:#6b7280;color:#fff}.progress-actions .btn-secondary:hover{background:#4b5563;transform:translateY(-1px)}.progress-actions .btn-icon{font-size:var(--font-size-xs)}.progress-note{margin-top:var(--spacing-lg);font-size:var(--font-size-sm);color:#6b7280;font-style:italic}@media (max-width: 768px){.progress-modal-content{max-width:90vw;margin:var(--spacing-md)}.progress-details{flex-direction:column;align-items:center;text-align:center}.progress-stats{align-items:center}}.info-note{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md);background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;margin:var(--spacing-md) 0}.note-icon{font-size:var(--font-size-lg)}.note-text{font-size:var(--font-size-sm);color:#1e40af}@media (max-width: 768px){.composition-header{flex-direction:column;gap:var(--spacing-xs);text-align:center}.composition-content{padding:var(--spacing-md);font-size:var(--font-size-sm)}.mode-tabs{flex-direction:column;align-items:center}.mode-tab{min-width:250px}.damage-army-header{flex-direction:column;gap:var(--spacing-md);text-align:center}.army-strategy{justify-content:center}.army-damage{align-items:center}.army-stats-grid{grid-template-columns:1fr}.army-summary-stats{flex-direction:column;gap:var(--spacing-sm)}.performance-grid,.combat-scenarios{grid-template-columns:1fr}.combat-log{max-height:300px;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}.combat-action{padding:var(--mobile-spacing-md);min-height:var(--touch-target-comfortable)}.action-details{font-size:var(--mobile-font-size-sm);line-height:1.5}}.enemy-unit-input-form,.enemy-unit-manager{background-color:#f8fafc;min-height:100vh;color:#1e293b}.enemy-unit-input-form{max-width:1400px;padding:20px}.form-section{margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e2e8f0}.form-section:last-child{border-bottom:none;margin-bottom:0}.form-section h3{font-size:1.375rem;font-weight:700;color:#1e293b;margin-bottom:20px;padding:12px 16px;background-color:#f1f5f9;border-left:4px solid #2563eb;border-radius:6px;display:flex;align-items:center;gap:10px}.form-group{margin-bottom:24px}.form-label{display:block;font-size:1rem;font-weight:600;margin-bottom:8px;color:#1e293b}.form-input,.form-select{width:100%;padding:14px 16px;border:2px solid #d1d5db;border-radius:8px;font-size:1rem;background-color:#fff;color:#1e293b;font-weight:500;transition:border-color .2s ease,box-shadow .2s ease}.form-input:focus,.form-select:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px #2563eb26}.form-input.error{border-color:#ef4444;background-color:#fef2f2}.form-error{color:#dc2626;font-size:.875rem;font-weight:600;margin-top:6px;display:block;padding:4px 8px;background-color:#fef2f2;border-radius:4px}.form-help{color:#475569;font-size:.875rem;margin-top:6px;display:block;font-style:italic}.text-secondary{color:#6b7280}.text-sm{font-size:.875rem}.mb-4{margin-bottom:16px}.grid{display:grid}.grid-cols-2{grid-template-columns:repeat(2,1fr)}.grid-cols-3{grid-template-columns:repeat(3,1fr)}.gap-2{gap:8px}.gap-4{gap:16px}.card{background-color:#fff;border:2px solid #e2e8f0;border-radius:12px;padding:32px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;margin-bottom:24px}.enemy-unit-card{background-color:var(--color-surface)!important;color:var(--color-text)!important;max-width:1200px;margin:0 auto}.enemy-unit-card .card-header{background-color:var(--color-border);border-radius:var(--radius-lg);margin:-16px -16px 24px;padding:var(--spacing-lg)}.enemy-unit-card .card-title{color:var(--color-text)!important;font-weight:700}.enemy-unit-card .text-secondary{color:var(--color-text-secondary)!important}#enemy-units-section h2,#enemy-units-section.card h2,.card#enemy-units-section h2{color:#1e293b!important;font-weight:700!important}.card-header{margin-bottom:32px;padding-bottom:20px;border-bottom:2px solid #e2e8f0}.card-title{font-size:1.75rem;font-weight:700;margin-bottom:12px;color:#1e293b;display:flex;align-items:center;gap:12px}.card-header p{color:#475569;font-size:1rem;line-height:1.6;margin:0}.btn-success{background-color:#059669;border-color:#059669;color:#fff}.btn-success:hover{background-color:#047857;border-color:#047857}.btn-xs{padding:6px 12px;font-size:.75rem}.btn-sm{padding:8px 16px;font-size:.875rem}.btn-lg{padding:16px 24px;font-size:1.1rem;font-weight:600}.attack-modifiers-container{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px}.modifier-controls{margin-bottom:20px}.add-modifier-form{display:flex;align-items:end;gap:12px}.attack-modifiers-list{display:flex;flex-direction:column;gap:8px}.modifier-item{display:flex;justify-content:space-between;align-items:center;padding:12px;background-color:#fff;border:1px solid #e2e8f0;border-radius:6px}.modifier-info{display:flex;flex-direction:column;gap:2px}.modifier-type{font-weight:500;color:#1e293b}.modifier-value{font-size:.875rem;color:#059669;font-weight:500}.modifier-actions{display:flex;gap:8px}.empty-modifiers{text-align:center;padding:20px;color:#6b7280;font-style:italic}.form-actions{display:flex;gap:16px;justify-content:flex-start;padding-top:24px;border-top:1px solid #e2e8f0}.enemy-unit-manager{padding:20px}.manager-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e2e8f0}.manager-title{font-size:1.5rem;font-weight:600;color:#1e293b}.manager-controls{display:flex;gap:12px;margin-bottom:24px}.search-input{flex:1;max-width:300px;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:1rem}.sort-select{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;background-color:#fff;min-width:150px}.unit-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.unit-card{background-color:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:16px;transition:all .2s ease;cursor:pointer}.unit-card:hover{border-color:#2563eb;box-shadow:0 4px 6px -1px #0000001a;transform:translateY(-1px)}.unit-card.selected{border-color:#2563eb;background-color:#eff6ff}.unit-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.unit-name{font-size:1.1rem;font-weight:600;color:#1e293b;margin:0}.unit-stats{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}.stat-item{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #f1f5f9}.stat-label{font-size:.875rem;color:#6b7280}.stat-value{font-size:.875rem;font-weight:500;color:#1e293b}.unit-types{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:12px}.unit-type-tag{background-color:#dbeafe;color:#1d4ed8;padding:2px 8px;border-radius:12px;font-size:.75rem;font-weight:500}.unit-actions{display:flex;gap:8px;margin-top:12px}.unit-meta{font-size:.75rem;color:#9ca3af;text-align:right}.empty-state{text-align:center;padding:60px 20px;color:#6b7280}.empty-state h3{font-size:1.25rem;margin-bottom:8px;color:#374151}.empty-state p{margin-bottom:24px}@media (max-width: 768px){.enemy-unit-input-form{padding:16px}.grid-cols-2,.grid-cols-3{grid-template-columns:1fr}.form-actions{flex-direction:column}.manager-controls{flex-direction:column;gap:12px}.search-input{max-width:none}.unit-list{grid-template-columns:1fr}.add-modifier-form{flex-direction:column;align-items:stretch}}.step-content{padding:20px;max-width:1200px;margin:0 auto}.card{background-color:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:24px;box-shadow:0 1px 2px #0000000d;margin-bottom:20px}.card-title{font-size:1.5rem;font-weight:600;margin-bottom:8px;color:#1e293b;display:flex;align-items:center;gap:8px}.card-description{color:#64748b;margin-bottom:24px;line-height:1.6}.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 20px;border:1px solid #e2e8f0;border-radius:6px;font-size:1rem;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s ease;background-color:#fff;color:#374151}.btn:hover{background-color:#f8fafc;border-color:#cbd5e1}.btn-primary{background-color:#2563eb;border-color:#2563eb;color:#fff}.btn-primary:hover{background-color:#1d4ed8;border-color:#1d4ed8}.btn-secondary{background-color:#6b7280;border-color:#6b7280;color:#fff}.btn-secondary:hover{background-color:#4b5563;border-color:#4b5563}.btn-danger{background-color:#ef4444;border-color:#ef4444;color:#fff}.btn-danger:hover{background-color:#dc2626;border-color:#dc2626}.input,.select{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:1rem;background-color:#fff;color:#374151;transition:border-color .2s ease,box-shadow .2s ease}.input:focus,.select:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}.config-section{margin-bottom:30px}.config-section h3{font-size:1.3rem;color:#2c3e50;margin-bottom:20px;font-weight:600}.config-grid{display:grid;grid-template-columns:1fr;gap:25px}.config-item{display:flex;flex-direction:column;gap:10px}.config-label{font-size:1.1rem;color:#2c3e50;margin-bottom:5px;display:block}.config-input{padding:12px;border:2px solid #e1e8ed;border-radius:8px;font-size:1rem;transition:border-color .3s ease;background:#fff;color:#2c3e50}.config-input:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db1a}.config-help{color:#6c757d;font-size:.9rem;line-height:1.5;margin:0;padding:0}.preset-buttons{display:flex;gap:15px;flex-wrap:wrap}.preset-buttons .btn{padding:10px 20px;border:2px solid #e1e8ed;background:#fff;color:#2c3e50;border-radius:8px;cursor:pointer;transition:all .3s ease;font-size:.95rem;font-weight:500}.preset-buttons .btn:hover{border-color:#3498db;background:#f8f9fa}.preset-buttons .btn:active{background:#e9ecef}.army-summary{margin-bottom:25px;padding:20px;background:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}.army-summary h3{font-size:1.3rem;color:#2c3e50;margin-bottom:15px;font-weight:600}.composition-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px;margin-bottom:20px}.composition-item{display:flex;flex-direction:column;gap:5px;padding:12px;background:#fff;border:1px solid #e9ecef;border-radius:6px}.composition-item strong{font-size:1rem;color:#2c3e50;font-weight:600}.composition-item span{font-size:.9rem;color:#6c757d;font-weight:500}.composition-totals{display:flex;gap:25px;padding-top:15px;border-top:1px solid #e9ecef;flex-wrap:wrap}.composition-totals span{font-size:1rem;color:#2c3e50}.composition-totals strong{font-weight:600;margin-right:5px}.scenario-header{margin-bottom:20px}.scenario-header h4{font-size:1.2rem;color:#2c3e50;margin-bottom:12px;font-weight:600}.scenario-stats{display:flex;gap:20px;flex-wrap:wrap;padding:15px;background:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.scenario-stats span{font-size:1rem;color:#2c3e50;font-weight:500}.scenario-stats strong{font-weight:600;margin-right:8px;color:#2c3e50}.scenario-tabs{display:flex;margin-bottom:20px;border-bottom:2px solid #e9ecef}.scenario-tab{padding:12px 20px;border:none;background:transparent;color:#6c757d;font-size:1rem;font-weight:500;cursor:pointer;border-bottom:3px solid transparent;transition:all .3s ease}.scenario-tab:hover{color:#2c3e50;background:#f8f9fa}.scenario-tab.active{color:#3498db;border-bottom-color:#3498db;background:#f8f9fa}.scenario-panel{padding:20px 0}.result-card{border:1px solid #e9ecef;border-radius:8px;padding:20px;margin-bottom:15px;background:#fff;transition:box-shadow .3s ease}.result-card:hover{box-shadow:0 2px 8px #0000001a}.result-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #e9ecef}.result-rank{font-size:1.3rem;color:#2c3e50;margin:0;font-weight:700}.result-damage strong{font-size:1.4rem;color:#e74c3c;font-weight:700;display:block}.result-damage span{font-size:.9rem;color:#6c757d;font-weight:500}.result-composition h5{font-size:1rem;color:#2c3e50;margin-bottom:10px;font-weight:600}.unit-item{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;padding:4px 8px;font-size:.85rem;color:#2c3e50;font-weight:500}.stat-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid #f8f9fa}.stat-row span:first-child{font-size:.9rem;color:#6c757d;font-weight:500}.stat-row span:last-child{font-size:.9rem;color:#2c3e50;font-weight:600;text-align:right}.result-actions{display:flex;justify-content:center;padding-top:10px;border-top:1px solid #e9ecef}.mercenary-limits{margin-top:30px;padding:20px;background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px}.mercenary-limits h3{font-size:1.3rem;color:#2c3e50;margin-bottom:10px;font-weight:600}.mercenary-help{color:#6c757d;font-size:.9rem;margin-bottom:20px;line-height:1.4}.mercenary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:15px}.mercenary-card{background:#fff;border:1px solid #e9ecef;border-radius:6px;padding:15px;transition:border-color .3s ease}.mercenary-card:hover{border-color:#3498db}.mercenary-info{margin-bottom:15px}.mercenary-name{font-size:1rem;color:#2c3e50;margin-bottom:8px;font-weight:600}.mercenary-stats{display:flex;gap:15px;flex-wrap:wrap}.mercenary-stats span{font-size:.85rem;color:#6c757d;background:#f8f9fa;padding:2px 6px;border-radius:3px;font-weight:500}.mercenary-input{display:flex;align-items:center;gap:10px}.mercenary-input label{font-size:.9rem;color:#2c3e50;font-weight:500;min-width:100px}.mercenary-limit-input{width:80px;padding:8px;border:1px solid #e9ecef;border-radius:4px;font-size:.9rem;text-align:center}.mercenary-limit-input:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db1a}.unit-stat-bonuses{margin-top:30px;padding:20px;background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px}.unit-stat-bonuses h3{font-size:1.3rem;color:#2c3e50;margin-bottom:10px;font-weight:600}.bonuses-help{color:#6c757d;font-size:.9rem;margin-bottom:20px;line-height:1.4}.bulk-buff-controls{margin-bottom:30px;padding:20px;background:#f8fafc;border:2px solid #e2e8f0;border-radius:12px}.bulk-buff-controls h4{font-size:1.2rem;color:#2c3e50;margin-bottom:10px;display:flex;align-items:center;gap:8px}.bulk-help{font-size:.9rem;color:#64748b;margin-bottom:20px;font-style:italic}.bulk-buff-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px}.bulk-buff-group{background:#fff;border:1px solid #d1d5db;border-radius:8px;padding:16px}.bulk-group-title{font-size:1.1rem;font-weight:600;color:#1e293b;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #e2e8f0}.bulk-buff-inputs{margin-bottom:12px}.bulk-input-row{display:flex;align-items:end;gap:12px;flex-wrap:wrap}.bulk-input-item{display:flex;flex-direction:column;gap:4px;min-width:120px}.bulk-input-item label{font-size:.9rem;font-weight:500;color:#374151}.bulk-health-input,.bulk-strength-input{flex:1;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:.9rem;max-width:100px}.apply-bulk-both{background:#059669;color:#fff;border:none;padding:10px 20px;border-radius:6px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:inline-block;text-align:center;text-decoration:none;white-space:nowrap;align-self:end;box-shadow:0 2px 4px #05966933}.apply-bulk-both:hover{background:#047857;transform:translateY(-1px);box-shadow:0 4px 8px #0596694d}.bulk-units-list{margin-top:8px;padding-top:8px;border-top:1px solid #f1f5f9}.bulk-units-list small{color:#6b7280;font-size:.8rem;line-height:1.4}.scrollable-results{max-height:600px;overflow-y:auto;border:1px solid #e2e8f0;border-radius:8px;padding:16px;background:#fafafa}.scrollable-results::-webkit-scrollbar{width:8px}.scrollable-results::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}.scrollable-results::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}.scrollable-results::-webkit-scrollbar-thumb:hover{background:#94a3b8}.bonus-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px}.bonus-card{background:#fff;border:1px solid #e9ecef;border-radius:8px;padding:20px;transition:border-color .3s ease}.bonus-card:hover{border-color:#3498db}.bonus-unit-info{margin-bottom:20px}.bonus-unit-name{font-size:1.1rem;color:#2c3e50;margin-bottom:12px;font-weight:600}.bonus-unit-stats{display:flex;flex-direction:column;gap:8px}.base-stats,.buffed-stats{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.stat-label{font-size:.85rem;font-weight:600;color:#6c757d;min-width:50px}.base-stats span:not(.stat-label){font-size:.85rem;color:#6c757d;background:#f8f9fa;padding:2px 6px;border-radius:3px}.buffed-stats span:not(.stat-label){font-size:.85rem;color:#2c3e50;background:#e8f5e8;padding:2px 6px;border-radius:3px;font-weight:500}.buffed-strength{border-left:3px solid #e74c3c!important}.buffed-health{border-left:3px solid #27ae60!important}.bonus-inputs{display:grid;grid-template-columns:1fr 1fr;gap:15px}.bonus-input-group{display:flex;flex-direction:column;gap:8px}.bonus-input-group label{font-size:.9rem;color:#2c3e50;font-weight:500}.health-bonus-input,.strength-bonus-input{width:100%;padding:10px;border:1px solid #e9ecef;border-radius:6px;font-size:.9rem;text-align:center;transition:border-color .3s ease}.health-bonus-input:focus{outline:none;border-color:#27ae60;box-shadow:0 0 0 2px #27ae601a}.strength-bonus-input:focus{outline:none;border-color:#e74c3c;box-shadow:0 0 0 2px #e74c3c1a}.improved-damage-optimizer{max-width:1200px;margin:0 auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.improved-damage-optimizer .header{text-align:center;margin-bottom:30px}.improved-damage-optimizer .header h1{font-size:2.5rem;color:#2c3e50;margin-bottom:10px}.improved-damage-optimizer .subtitle{font-size:1.1rem;color:#7f8c8d;margin:0}.progress-steps{display:flex;justify-content:center;margin-bottom:40px;padding:0 20px}.step{display:flex;flex-direction:column;align-items:center;position:relative;min-width:120px}.step:not(:last-child):after{content:"";position:absolute;top:20px;left:80px;width:80px;height:2px;background-color:#e0e0e0;z-index:1}.step.completed:not(:last-child):after{background-color:#4caf50}.step-number{width:40px;height:40px;border-radius:50%;background-color:#e0e0e0;color:#666;display:flex;align-items:center;justify-content:center;font-weight:700;position:relative;z-index:2;transition:all .3s ease}.step.active .step-number{background-color:#3498db;color:#fff}.step.completed .step-number{background-color:#4caf50;color:#fff}.step-label{margin-top:10px;font-size:.9rem;color:#666;text-align:center;transition:color .3s ease}.step.active .step-label{color:#3498db;font-weight:600}.step.completed .step-label{color:#4caf50}.main-content{margin-bottom:30px}.card{background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:30px;margin-bottom:20px}.card-title{font-size:1.5rem;color:#2c3e50;margin-bottom:15px;display:flex;align-items:center;gap:10px}.card-description{color:#666;margin-bottom:25px;line-height:1.6}.enemy-list{margin-bottom:25px}.enemy-row{display:flex;align-items:center;gap:15px;padding:16px;border:1px solid #e2e8f0;border-radius:8px;margin-bottom:16px;background-color:#fff;box-shadow:0 1px 2px #0000000d;transition:all .2s ease}.enemy-row:hover{border-color:#cbd5e1;box-shadow:0 2px 4px #0000001a}.enemy-fields{display:flex;gap:15px;flex:1;align-items:center}.field-group{display:flex;flex-direction:column;gap:5px}.field-group label{font-size:.875rem;font-weight:500;color:#374151;margin-bottom:4px}.enemy-type-select,.enemy-count,.enemy-finite-select{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem;min-width:120px;background-color:#fff;color:#374151;transition:border-color .2s ease,box-shadow .2s ease}.enemy-type-select:focus,.enemy-count:focus,.enemy-finite-select:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}.enemy-type-select{min-width:200px;max-width:250px}.enemy-type-select optgroup{font-weight:700;color:#3498db;margin-top:5px}.enemy-type-select option{font-weight:400;color:#333;padding:5px}.remove-enemy{padding:8px 12px;background-color:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.remove-enemy:hover{background-color:#c0392b}.enemy-management{margin-top:25px;padding-top:20px;border-top:1px solid #e0e0e0}.field-group.disabled{opacity:.7}.field-group.disabled input,.field-group.disabled select{background-color:#f1f5f9;cursor:not-allowed;color:#94a3b8;border-color:#e2e8f0}.field-group.disabled label{color:#94a3b8}.form-help,.field-note{font-size:.8rem;color:#6c757d;margin-top:3px;font-style:italic}.enemy-management h3{margin-bottom:15px;color:#555}.management-buttons{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px}.quick-options{margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0}.quick-options h3{margin-bottom:15px;color:#555}.quick-buttons{display:flex;gap:10px;flex-wrap:wrap}.budget-config{margin-bottom:30px}.selected-units-section{margin-bottom:30px;padding:20px;border:2px solid #e3f2fd;border-radius:8px;background-color:#f8fafe}.selected-units-section h3{margin-bottom:20px;color:#1976d2;display:flex;align-items:center;gap:10px}.no-selected-units{text-align:center;padding:30px;color:#666;font-style:italic}.selected-units-display{display:flex;flex-direction:column;gap:25px;max-height:400px;overflow-y:auto;padding-right:10px}.selected-units-display::-webkit-scrollbar{width:8px}.selected-units-display::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.selected-units-display::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.selected-units-display::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.unit-cost-group{background-color:#fff;border-radius:6px;padding:20px;box-shadow:0 1px 3px #0000001a}.cost-group-title{margin:0 0 15px;color:#2c3e50;font-size:1.1rem;border-bottom:2px solid #ecf0f1;padding-bottom:8px}.selected-units-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.selected-unit-card{border:1px solid #e0e0e0;border-radius:6px;padding:15px;background-color:#fafafa;transition:all .3s ease}.selected-unit-card:hover{box-shadow:0 2px 8px #0000001a;transform:translateY(-1px)}.selected-unit-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.selected-unit-name{margin:0;font-size:1rem;color:#2c3e50;font-weight:600}.remove-selected-unit{background:none;border:none;color:#e74c3c;cursor:pointer;padding:4px;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:1.2rem;font-weight:700}.remove-selected-unit:hover{background-color:#e74c3c;color:#fff}.remove-icon{line-height:1}.selected-unit-stats{margin-bottom:12px}.stat-row{display:flex;justify-content:space-between;align-items:center;padding:4px 0;border-bottom:1px solid #eee}.stat-label{font-weight:500;color:#666;font-size:.9rem}.stat-value{font-weight:600;color:#2c3e50;font-size:.9rem}.selected-unit-types{display:flex;flex-wrap:wrap;gap:5px}.unit-type-tag{background-color:#3498db;color:#fff;padding:2px 6px;border-radius:3px;font-size:.75rem;font-weight:500}.future-enhancements{margin-top:20px;padding-top:20px;border-top:2px dashed #bbb}.enhancement-placeholder{background-color:#fff3cd;border:1px solid #ffeaa7;border-radius:6px;padding:20px;text-align:center}.enhancement-placeholder h4{margin:0 0 10px;color:#856404}.enhancement-note{margin:0;color:#856404;font-style:italic;font-size:.9rem}.budget-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:15px}.budget-item{display:flex;flex-direction:column;gap:8px}.budget-item label{font-weight:600;color:#555}.unit-selection h3{margin-bottom:15px;color:#555}.unit-controls{display:flex;gap:15px;margin-bottom:20px;align-items:center;flex-wrap:wrap}.search-box{flex:1;min-width:200px}.selection-controls{display:flex;gap:10px}.unit-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:15px;max-height:400px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:6px;padding:15px}.unit-card{border:2px solid #e0e0e0;border-radius:6px;padding:15px;cursor:pointer;transition:all .3s ease;background-color:#fff}.unit-card:hover{border-color:#3498db;box-shadow:0 2px 8px #3498db33}.unit-card.selected{border-color:#3498db;background-color:#f8f9fa;box-shadow:0 2px 8px #3498db4d}.unit-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.unit-name{font-size:1rem;font-weight:600;color:#2c3e50;margin:0}.unit-cost{font-size:.85rem;background-color:#3498db;color:#fff;padding:3px 8px;border-radius:12px}.unit-stats{display:flex;gap:15px;margin-bottom:8px}.stat{font-size:.9rem;color:#666;font-weight:500}.unit-types{font-size:.8rem;color:#888}.config-summary{margin-bottom:30px;padding:20px;background-color:#f8f9fa;border-radius:6px}.summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:15px}.summary-item{color:#555}.progress-display{margin-bottom:30px}.progress-container{background-color:#f8f9fa;border-radius:6px;padding:20px}.progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.progress-header h4{margin:0;color:#2c3e50;text-transform:capitalize}.progress-percentage{font-size:1.2rem;font-weight:700;color:#3498db}.progress-bar{width:100%;height:12px;background-color:#e0e0e0;border-radius:6px;overflow:hidden;margin-bottom:15px}.progress-fill{height:100%;background-color:#3498db;transition:width .3s ease}.progress-message{color:#666;margin-bottom:15px}.progress-details{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:15px}.detail-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background-color:#fff;border-radius:4px;font-size:.9rem}.optimization-controls{text-align:center}.results-summary{margin-bottom:30px}.summary-stats{display:flex;justify-content:center;gap:40px;padding:20px;background-color:#f8f9fa;border-radius:6px}.stat-item{text-align:center}.stat-item strong{display:block;font-size:1.5rem;color:#3498db;margin-bottom:5px}.stat-item span{color:#666;font-size:.9rem}.results-list{margin-bottom:30px}.result-card{border:1px solid #e0e0e0;border-radius:6px;padding:20px;margin-bottom:15px;background-color:#fff}.result-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.result-rank{font-size:1.2rem;color:#3498db;margin:0}.result-damage{text-align:right}.result-damage strong{display:block;font-size:1.3rem;color:#e74c3c}.result-damage span{font-size:.9rem;color:#666}.result-composition{margin-bottom:15px}.result-composition h5{margin-bottom:10px;color:#555}.unit-list{display:flex;flex-wrap:wrap;gap:8px}.unit-item{background-color:#f8f9fa;padding:4px 8px;border-radius:4px;font-size:.85rem;color:#555}.result-stats{margin-bottom:15px}.stat-row{display:flex;justify-content:space-between;align-items:center;padding:5px 0;border-bottom:1px solid #f0f0f0}.stat-row:last-child{border-bottom:none}.result-actions{text-align:right}.results-actions{display:flex;justify-content:center;gap:15px}.step-navigation{display:flex;justify-content:space-between;padding:20px 0;border-top:1px solid #e0e0e0}.nav-buttons{display:flex;justify-content:space-between;width:100%}.btn{padding:12px 24px;border:none;border-radius:6px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px;text-decoration:none;background-color:transparent}.btn:disabled{opacity:.5;cursor:not-allowed}.btn-primary{background-color:#3498db;color:#fff}.btn-primary:hover:not(:disabled){background-color:#2980b9}.btn-secondary{background-color:#95a5a6;color:#fff}.btn-secondary:hover:not(:disabled){background-color:#7f8c8d}.btn-danger{background-color:#e74c3c;color:#fff}.btn-danger:hover:not(:disabled){background-color:#c0392b}.btn-outline{border:2px solid #3498db;color:#3498db;background-color:transparent}.btn-outline:hover:not(:disabled){background-color:#3498db;color:#fff}.btn-small{padding:8px 16px;font-size:.9rem}.btn-icon{font-size:1.1em}.input{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:1rem;width:100%;transition:border-color .3s ease}.input:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}@media (max-width: 768px){.improved-damage-optimizer{padding:15px}.improved-damage-optimizer .header h1{font-size:2rem}.progress-steps{flex-direction:column;align-items:center;gap:20px}.step:not(:last-child):after{display:none}.enemy-fields{flex-direction:column;align-items:stretch}.unit-grid{grid-template-columns:1fr}.summary-stats{flex-direction:column;gap:20px}.nav-buttons{flex-direction:column;gap:15px}.btn{width:100%;justify-content:center}}.combat-logs-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;opacity:0;transition:opacity .3s ease}.combat-logs-modal.show{opacity:1}.modal-backdrop{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;cursor:pointer}.modal-content{position:relative;width:90%;max-width:1200px;height:90%;margin:5vh auto;background:#fff;border-radius:8px;box-shadow:0 10px 30px #0000004d;display:flex;flex-direction:column;overflow:hidden}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;border-bottom:1px solid #e0e0e0;background-color:#f8f9fa}.modal-header h2{margin:0;color:#2c3e50;font-size:1.5rem}.modal-close{background:none;border:none;font-size:1.5rem;cursor:pointer;padding:5px 10px;border-radius:4px;color:#666;transition:all .3s ease}.modal-close:hover{background-color:#e74c3c;color:#fff}.modal-body{flex:1;overflow-y:auto;padding:0}.combat-logs-container{padding:30px}.army-summary{margin-bottom:30px;padding:20px;background-color:#f8f9fa;border-radius:8px;border-left:4px solid #3498db}.army-summary h3{margin:0 0 15px;color:#2c3e50}.composition-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px;margin-bottom:15px}.composition-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background-color:#fff;border-radius:4px;border:1px solid #e0e0e0}.composition-totals{display:flex;gap:30px;justify-content:center;padding-top:15px;border-top:1px solid #e0e0e0;font-size:1.1rem}.battle-scenarios{background-color:#fff;border-radius:8px;border:1px solid #e0e0e0}.scenario-tabs{display:flex;border-bottom:1px solid #e0e0e0}.scenario-tab{flex:1;padding:15px 20px;background:none;border:none;cursor:pointer;font-weight:600;transition:all .3s ease;color:#666;border-bottom:3px solid transparent}.scenario-tab:hover{background-color:#f8f9fa}.scenario-tab.active{color:#3498db;border-bottom-color:#3498db;background-color:#f8f9fa}.scenario-content{position:relative}.scenario-panel{padding:20px}.scenario-header{margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e0e0e0}.scenario-header h4{margin:0 0 10px;color:#2c3e50;font-size:1.2rem}.scenario-stats{display:flex;gap:20px;flex-wrap:wrap}.scenario-stats span{padding:5px 10px;background-color:#f8f9fa;border-radius:4px;font-size:.9rem}.combat-log{max-height:400px;overflow-y:auto;border:1px solid #d1d5db;border-radius:6px;background:#fff;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.combat-log::-webkit-scrollbar{width:8px}.combat-log::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}.combat-log::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}.combat-log::-webkit-scrollbar-thumb:hover{background:#94a3b8}.combat-log-list{display:flex;flex-direction:column}.combat-action{padding:12px 16px;border-bottom:1px solid #f3f4f6;transition:background-color .2s ease;min-height:48px;display:flex;flex-direction:column;justify-content:center}.combat-action:hover{background-color:#f8fafc}.combat-action.elimination{background-color:#fef2f2}.combat-action.elimination:hover{background-color:#fee2e2}.combat-action.player-action{border-left:3px solid #3b82f6}.combat-action.player-action .action-summary{color:#1d4ed8}.combat-action.enemy-action{border-left:3px solid #dc2626}.combat-action.enemy-action .action-summary{color:#dc2626}.combat-action.player-action.elimination{border-left:4px solid #1d4ed8}.combat-action.enemy-action.elimination{border-left:4px solid #b91c1c}.action-header{display:flex;align-items:center;gap:12px;margin-bottom:4px}.turn-number{font-size:.75rem;color:#6b7280;background-color:#f3f4f6;padding:2px 6px;border-radius:3px;font-weight:600;min-width:fit-content}.action-summary{font-weight:600;color:#374151;font-size:.875rem;flex:1}.action-details{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.action-text{color:#6b7280;font-size:.875rem;flex:1}.damage-dealt{color:#dc2626;font-weight:600;font-size:.875rem;margin-left:8px}.elimination-flag{background-color:#dc2626;color:#fff;padding:2px 6px;border-radius:3px;font-size:.75rem;font-weight:600;text-transform:uppercase}.no-combat-log{text-align:center;padding:40px 20px;color:#666;font-style:italic}@media (max-width: 768px){.modal-content{width:95%;height:95%;margin:2.5vh auto}.modal-header{padding:15px 20px}.modal-header h2{font-size:1.2rem}.combat-logs-container{padding:20px}.composition-grid{grid-template-columns:1fr}.composition-totals{flex-direction:column;gap:10px}.scenario-tabs{flex-direction:column}.scenario-stats{flex-direction:column;gap:10px}.action-details{flex-direction:column;align-items:flex-start;gap:8px}}.hidden{display:none!important}.text-center{text-align:center}.no-results{text-align:center;padding:40px 20px;color:#666}.progress-placeholder{text-align:center;padding:40px 20px;color:#666;font-style:italic}
